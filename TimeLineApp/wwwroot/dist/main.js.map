{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/colorutils.ts","webpack:///./src/contextmenu.js","webpack:///./src/dateutils.ts","webpack:///./src/index.ts","webpack:///./src/saagraph.ts","webpack:///./src/stringutils.ts","webpack:///./src/timeline.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","export let makeColor = function * () {\r\n  var index = 0\r\n  let colors = ['green', 'rgba(255, 0, 0, 1.0)', 'blue', 'magenta', 'orange']\r\n  while (true) {\r\n    yield colors[index]\r\n    if (index < 4) {\r\n      index++\r\n    } else {\r\n      index = 0\r\n    }\r\n  }\r\n}\r\n","/* eslint-disable eqeqeq */\r\nexport function ContextMenu (menu, options) {\r\n  var self = this\r\n  var num = ContextMenu.count++\r\n\r\n  this.menu = menu\r\n  this.contextTarget = null\r\n\r\n  if (!(menu instanceof Array)) {\r\n    throw new Error('Parameter 1 must be of type Array')\r\n  }\r\n\r\n  if (typeof options !== 'undefined') {\r\n    if (typeof options !== 'object') {\r\n      throw new Error('Parameter 2 must be of type object')\r\n    }\r\n  } else {\r\n    options = {}\r\n  }\r\n\r\n  window.addEventListener('resize', function () {\r\n    if (ContextUtil.getProperty(options, 'close_on_resize', true)) {\r\n      self.hide()\r\n    }\r\n  })\r\n\r\n  this.setOptions = function (_options) {\r\n    if (typeof _options === 'object') {\r\n      options = _options\r\n    } else {\r\n      throw new Error('Parameter 1 must be of type object')\r\n    }\r\n  }\r\n\r\n  this.changeOption = function (option, value) {\r\n    if (typeof option === 'string') {\r\n      if (typeof value !== 'undefined') {\r\n        options[option] = value\r\n      } else {\r\n        throw new Error('Parameter 2 must be set')\r\n      }\r\n    } else {\r\n      throw new Error('Parameter 1 must be of type string')\r\n    }\r\n  }\r\n\r\n  this.getOptions = function () {\r\n    return options\r\n  }\r\n\r\n  this.reload = function () {\r\n    if (document.getElementById('cm_' + num) == null) {\r\n      var cnt = document.createElement('div')\r\n      cnt.className = 'cm_container'\r\n      cnt.id = 'cm_' + num\r\n\r\n      document.body.appendChild(cnt)\r\n    }\r\n\r\n    var container = document.getElementById('cm_' + num)\r\n    container.innerHTML = ''\r\n\r\n    container.appendChild(renderLevel(menu))\r\n  }\r\n\r\n  function renderLevel (level) {\r\n    var ulOuter = document.createElement('ul')\r\n\r\n    level.forEach(function (item) {\r\n      var li = document.createElement('li')\r\n      li.menu = self\r\n\r\n      if (typeof item.type === 'undefined') {\r\n        var iconSpan = document.createElement('span')\r\n        iconSpan.className = 'cm_icon_span'\r\n\r\n        if (ContextUtil.getProperty(item, 'icon', '') != '') {\r\n          iconSpan.innerHTML = ContextUtil.getProperty(item, 'icon', '')\r\n        } else {\r\n          iconSpan.innerHTML = ContextUtil.getProperty(options, 'default_icon', '')\r\n        }\r\n\r\n        var textSpan = document.createElement('span')\r\n        textSpan.className = 'cm_text'\r\n\r\n        if (ContextUtil.getProperty(item, 'text', '') != '') {\r\n          textSpan.innerHTML = ContextUtil.getProperty(item, 'text', '')\r\n        } else {\r\n          textSpan.innerHTML = ContextUtil.getProperty(options, 'default_text', 'item')\r\n        }\r\n\r\n        var subSpan = document.createElement('span')\r\n        subSpan.className = 'cm_sub_span'\r\n\r\n        if (typeof item.sub !== 'undefined') {\r\n          if (ContextUtil.getProperty(options, 'sub_icon', '') != '') {\r\n            subSpan.innerHTML = ContextUtil.getProperty(options, 'sub_icon', '')\r\n          } else {\r\n            subSpan.innerHTML = '&#155;'\r\n          }\r\n        }\r\n\r\n        li.appendChild(iconSpan)\r\n        li.appendChild(textSpan)\r\n        li.appendChild(subSpan)\r\n\r\n        if (!ContextUtil.getProperty(item, 'enabled', true)) {\r\n          li.setAttribute('disabled', '')\r\n        } else {\r\n          if (typeof item.events === 'object') {\r\n            var keys = Object.keys(item.events)\r\n\r\n            for (var i = 0; i < keys.length; i++) {\r\n              li.addEventListener(keys[i], item.events[keys[i]])\r\n            }\r\n          }\r\n\r\n          if (typeof item.sub !== 'undefined') {\r\n            li.appendChild(renderLevel(item.sub))\r\n          }\r\n        }\r\n      } else {\r\n        if (item.type == ContextMenu.DIVIDER) {\r\n          li.className = 'cm_divider'\r\n        }\r\n      }\r\n\r\n      ulOuter.appendChild(li)\r\n    })\r\n\r\n    return ulOuter\r\n  }\r\n\r\n  this.display = function (e, target) {\r\n    if (typeof target !== 'undefined') {\r\n      self.contextTarget = target\r\n    } else {\r\n      self.contextTarget = e.target\r\n    }\r\n\r\n    var menu = document.getElementById('cm_' + num)\r\n\r\n    var clickCoords = { x: e.clientX, y: e.clientY }\r\n    var clickCoordsX = clickCoords.x\r\n    var clickCoordsY = clickCoords.y\r\n\r\n    var menuWidth = menu.offsetWidth + 4\r\n    var menuHeight = menu.offsetHeight + 4\r\n\r\n    var windowWidth = window.innerWidth\r\n    var windowHeight = window.innerHeight\r\n\r\n    var mouseOffset = parseInt(ContextUtil.getProperty(options, 'mouse_offset', 2))\r\n\r\n    if ((windowWidth - clickCoordsX) < menuWidth) {\r\n      menu.style.left = windowWidth - menuWidth + 'px'\r\n    } else {\r\n      menu.style.left = (clickCoordsX + mouseOffset) + 'px'\r\n    }\r\n\r\n    if ((windowHeight - clickCoordsY) < menuHeight) {\r\n      menu.style.top = windowHeight - menuHeight + 'px'\r\n    } else {\r\n      menu.style.top = (clickCoordsY + mouseOffset) + 'px'\r\n    }\r\n\r\n    var sizes = ContextUtil.getSizes(menu)\r\n\r\n    if ((windowWidth - clickCoordsX) < sizes.width) {\r\n      menu.classList.add('cm_border_right')\r\n    } else {\r\n      menu.classList.remove('cm_border_right')\r\n    }\r\n\r\n    if ((windowHeight - clickCoordsY) < sizes.height) {\r\n      menu.classList.add('cm_border_bottom')\r\n    } else {\r\n      menu.classList.remove('cm_border_bottom')\r\n    }\r\n\r\n    menu.classList.add('display')\r\n\r\n    if (ContextUtil.getProperty(options, 'close_on_click', true)) {\r\n      window.addEventListener('click', documentClick)\r\n    }\r\n\r\n    e.preventDefault()\r\n  }\r\n\r\n  this.hide = function () {\r\n    document.getElementById('cm_' + num).classList.remove('display')\r\n    window.removeEventListener('click', documentClick)\r\n  }\r\n\r\n  function documentClick () {\r\n    self.hide()\r\n  }\r\n\r\n  this.reload()\r\n}\r\n\r\nContextMenu.count = 0\r\nContextMenu.DIVIDER = 'cm_divider'\r\nexport const DIVIDER = 'cm_divider'\r\n\r\nexport const ContextUtil = {\r\n  getProperty: function (options, opt, def) {\r\n    if (typeof options[opt] !== 'undefined') {\r\n      return options[opt]\r\n    } else {\r\n      return def\r\n    }\r\n  },\r\n\r\n  getSizes: function (obj) {\r\n    var lis = obj.getElementsByTagName('li')\r\n\r\n    var widthDef = 0\r\n    var heightDef = 0\r\n\r\n    for (var i = 0; i < lis.length; i++) {\r\n      var li = lis[i]\r\n\r\n      if (li.offsetWidth > widthDef) {\r\n        widthDef = li.offsetWidth\r\n      }\r\n\r\n      if (li.offsetHeight > heightDef) {\r\n        heightDef = li.offsetHeight\r\n      }\r\n    }\r\n\r\n    var width = widthDef\r\n    var height = heightDef\r\n\r\n    for (let i = 0; i < lis.length; i++) {\r\n      let li = lis[i]\r\n\r\n      var ul = li.getElementsByTagName('ul')\r\n      if (typeof ul[0] !== 'undefined') {\r\n        var ulSize = ContextUtil.getSizes(ul[0])\r\n\r\n        if (widthDef + ulSize.width > width) {\r\n          width = widthDef + ulSize.width\r\n        }\r\n\r\n        if (heightDef + ulSize.height > height) {\r\n          height = heightDef + ulSize.height\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      'width': width,\r\n      'height': height\r\n    }\r\n  }\r\n}\r\n","import { stringUtils } from './stringutils'\r\n\r\nexport class DateUtils {\r\n  private static mth: string[] = ['ЯНВ', 'ФЕВ', 'МАР', 'АПР', 'МАЙ', 'ИЮН', 'ИЮЛ', 'АВГ', 'СЕН', 'ОКТ', 'НОЯ', 'ДЕК']\r\n  public static getCurDate(): Date {\r\n    let dt = new Date()\r\n    return new Date(dt.getFullYear(), dt.getMonth(), dt.getDate())\r\n  }\r\n  public static getDateAgo(date: Date, days: number): Date {\r\n    var dateCopy = new Date(date)\r\n    dateCopy.setDate(dateCopy.getDate() + days)\r\n    return dateCopy\r\n  }\r\n  public static formatDate(dt: Date): string {\r\n    return stringUtils.pad(dt.getDate(), 2) + '.' + stringUtils.pad(dt.getMonth() + 1, 2) + '.' + (dt.getFullYear() + '').substring(2)\r\n  }\r\n  public static getMonthFromDate(dt: Date): number {\r\n    return (dt.getFullYear() - 1) * 12 + dt.getMonth() + 1\r\n  }\r\n  public static getYearFromDate(dt: Date): number {\r\n    return dt.getFullYear()\r\n  }\r\n  public static getDecadeFromDate(dt: Date): number {\r\n    return Math.floor(dt.getFullYear() / 10) + 1\r\n  }\r\n  public static getCenturyFromDate(dt: Date): number {\r\n    return Math.floor(dt.getFullYear() / 100) + 1\r\n  }\r\n  public static getDecade(century: number, decade: number): number {\r\n    return (century - 1) * 10 + decade + 1\r\n  }\r\n  public static formatMonth(period: number): string {\r\n    let year = Math.floor((period - 1) / 12) + 1\r\n    let month = period - (year - 1) * 12\r\n    return this.mth[month - 1] + ' ' + stringUtils.pad(year, 4)\r\n  }\r\n  public static formatYear(period: number): string {\r\n    return period.toString()\r\n  }\r\n  public static formatDecade(period: number): string {\r\n    let century = Math.floor((period - 1) / 10) + 1\r\n    let decade = period - (century - 1) * 10\r\n    return romanize(century) + ' ' + (decade - 1) * 10 + 'е'\r\n  }\r\n  public static formatCentury(num: number): string {\r\n    return romanize(num)\r\n  }\r\n  public static getDecadeComponent(decade: number): number {\r\n    let century = Math.floor((decade - 1) / 10) + 1\r\n    return decade - (century - 1) * 10\r\n  }\r\n}\r\n\r\nfunction romanize (num: number): string {\r\n  if (!+num) { return null }\r\n  var digits = String(+num).split('')\r\n\r\n  var key = ['', 'C', 'CC', 'CCC', 'CD', 'D', 'DC', 'DCC', 'DCCC', 'CM',\r\n    '', 'X', 'XX', 'XXX', 'XL', 'L', 'LX', 'LXX', 'LXXX', 'XC',\r\n    '', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX']\r\n\r\n  var roman = ''\r\n\r\n  var i = 3\r\n  while (i--) { roman = (key[+digits.pop() + (i * 10)] || '') + roman }\r\n  return Array(+digits.join('') + 1).join('M') + roman\r\n}\r\n","import { TimeLine } from './timeline'\r\nimport { makeColor } from './colorutils'\r\nimport { ContextMenu, DIVIDER } from './contextmenu'\r\n\r\nconst MIN_GAP = 100\r\nlet PERIOD_TYPE = TimeLine.EnumPeriod.day\r\nconst HTOP = 56\r\n\r\nlet timeLines: TimeLine[] = []\r\nlet ctx: CanvasRenderingContext2D\r\n\r\n(function main () {\r\n  let isDragDrop = false\r\n  let indLine\r\n\r\n  let menuitems = [\r\n    {\r\n      'id': 'new',\r\n      'text': 'Новая',\r\n      'icon': '<i class=\"far fa-file\"></i></i>',\r\n      'events': {\r\n        'click': NewTmDialog\r\n      }\r\n    },\r\n    {\r\n      'id': 'load',\r\n      'text': 'Загрузить',\r\n      'icon': '<i class=\"far fa-folder-open\"></i>',\r\n      'events': {\r\n        'click': (e) => {\r\n          LoadTimeLine()\r\n        }\r\n      }\r\n    },\r\n    {\r\n      'id': 'save',\r\n      'text': 'Сохранить',\r\n      'icon': '<i class=\"far fa-save\"></i>',\r\n      'enabled': false\r\n    },\r\n    {\r\n      'id': 'line',\r\n      'type': DIVIDER\r\n    },\r\n    {\r\n      'id': 'period',\r\n      'text': 'Периодичность',\r\n      'sub': [\r\n        {\r\n          'id': TimeLine.EnumPeriod.day,\r\n          'text': 'День',\r\n          'icon': '<i class=\"fas fa-angle-down\"></i>',\r\n          'events': {\r\n            'click': (e) => {\r\n              SwitchPeriod(menuCtx, TimeLine.EnumPeriod.day)\r\n            }\r\n          }\r\n        },\r\n        {\r\n          'id': TimeLine.EnumPeriod.month,\r\n          'text': 'Месяц',\r\n          'events': {\r\n            'click': (e) => {\r\n              SwitchPeriod(menuCtx, TimeLine.EnumPeriod.month)\r\n            }\r\n          }\r\n        },\r\n        {\r\n          'id': TimeLine.EnumPeriod.year,\r\n          'text': 'Год',\r\n          'events': {\r\n            'click': (e) => {\r\n              SwitchPeriod(menuCtx, TimeLine.EnumPeriod.year)\r\n            }\r\n          }\r\n        },\r\n        {\r\n          'id': TimeLine.EnumPeriod.decade,\r\n          'text': 'Десятилетие',\r\n          'events': {\r\n            'click': (e) => {\r\n              SwitchPeriod(menuCtx, TimeLine.EnumPeriod.decade)\r\n            }\r\n          }\r\n        },\r\n        {\r\n          'id': TimeLine.EnumPeriod.century,\r\n          'text': 'Век',\r\n          'events': {\r\n            'click': (e) => {\r\n              SwitchPeriod(menuCtx, TimeLine.EnumPeriod.century)\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n  let menuCtx = new ContextMenu(menuitems)\r\n\r\n  let canvas: HTMLCanvasElement = document.getElementById('canvas') as HTMLCanvasElement\r\n  ctx = canvas.getContext('2d')\r\n\r\n  canvas.onmousedown = (ev) => {\r\n    if (ev.button === 0) {\r\n      let pos = getMousePos(canvas, ev)\r\n      indLine = getIndexLine(pos.y)\r\n      if (indLine !== -1) {\r\n        isDragDrop = true\r\n        canvas.style.cursor = 'Pointer'\r\n      }\r\n    }\r\n  }\r\n  canvas.onmouseup = (ev) => {\r\n    isDragDrop = false\r\n    canvas.style.cursor = 'Default'\r\n  }\r\n  canvas.onmousemove = (ev) => {\r\n    let data\r\n    if (!isDragDrop) {\r\n      for (let i = 0; i < timeLines.length; i++) {\r\n        let pos = getMousePos(canvas, ev)\r\n        data = timeLines[i].getCellValue(pos.x, pos.y)\r\n        if (data !== timeLines[i].curdata) {\r\n          if (timeLines[i].curdata !== -1) {\r\n            timeLines[i].offBox()\r\n          }\r\n          if (data !== -1) {\r\n            timeLines[i].onBox(data)\r\n          }\r\n          timeLines[i].curdata = data\r\n        }\r\n      }\r\n    } else {\r\n      timeLines[indLine].shift(ev.movementX)\r\n      timeLines[indLine].draw()\r\n    }\r\n  }\r\n\r\n  (window.onresize = () => {\r\n    canvas.style.top = HTOP + 'px'\r\n    canvas.width = window.innerWidth\r\n    canvas.height = window.innerHeight - HTOP\r\n    drawAll()\r\n  })()\r\n\r\n  $('#canvas').on('contextmenu', (e) => {\r\n    let pos = getMousePos(canvas, e)\r\n    indLine = getIndexLine(pos.y)\r\n    let pMenu = menuCtx.menu.find(el => el.id === 'save')\r\n    if (indLine === -1) {\r\n      pMenu.enabled = false\r\n    } else {\r\n      pMenu.enabled = true\r\n      pMenu.events = {\r\n        'click': (e) => {\r\n          timeLines[indLine].save()\r\n        }\r\n      }\r\n    }\r\n    menuCtx.reload()\r\n    menuCtx.display(e)\r\n    e.preventDefault()\r\n  })\r\n\r\n  $('#newTimeline').click((ev) => {\r\n    NewTmDialog()\r\n  })\r\n  $('#load').click((ev) => {\r\n    LoadTimeLine()\r\n  })\r\n  $('#save').click((ev) => {\r\n    alert('save')\r\n  })\r\n  $('#options').click((ev) => {\r\n    $('#typePeriod').val(TimeLine.EnumPeriod.year)\r\n    $('#tmOptionsModal').modal()\r\n  })\r\n  $('#btnNewName').click((ev) => {\r\n    $('#tmNameModal').modal('hide')\r\n    NewTimeLine(<string>$('#tmName').val())\r\n  })\r\n  $('.closenamemodal').click((ev) => {\r\n    $('#tmNameModal').modal('hide')\r\n  })\r\n  $('.closeoptionmodal').click((ev) => {\r\n    $('#tmOptionsModal').modal('hide')\r\n  })\r\n  $('.closeregistermodal').click((ev) => {\r\n    $('#tmRegisterModal').modal('hide')\r\n  })\r\n  $('#tmName').keyup((ev) => {\r\n    if ((<string>$('#tmName').val()).trim() !== '') {\r\n      $('#btnNewName').prop('disabled', false)\r\n      if (ev.keyCode === 13) {\r\n        $('#tmNameModal').modal('hide')\r\n        NewTimeLine(<string>$('#tmName').val())\r\n      }\r\n    } else {\r\n      $('#btnNewName').prop('disabled', true)\r\n    }\r\n  })\r\n  $('#tmNameModal').on('shown.bs.modal', function () {\r\n    $('#tmName').trigger('focus')\r\n  })\r\n  $('#action01').click((ev) => {\r\n    alert('action01')\r\n    })\r\n  $('#btnReg').click((ev) => {\r\n    $('#tmRegisterModal').modal()\r\n    return false\r\n  })\r\n  $('#btnRegisterUser').click(ev => {\r\n    if ((<HTMLInputElement>$('#regLogin')[0]).reportValidity()\r\n        && (<HTMLInputElement>$('#regEmail')[0]).reportValidity()\r\n        && (<HTMLInputElement>$('#regPassword1')[0]).reportValidity()\r\n        && (<HTMLInputElement>$('#regPassword2')[0]).reportValidity()) {\r\n      $('#tmRegisterModal').modal('hide')\r\n    }\r\n  })\r\n})()\r\n\r\nfunction LoadTimeLine () {\r\n  let tl = TimeLine.load(ctx)\r\n  NewTimeLine(tl.name, tl)\r\n}\r\n\r\nfunction NewTimeLine (name: string, tl: TimeLine = null) {\r\n  let aY\r\n  if ((((timeLines.length + 2) * MIN_GAP) + (timeLines.length + 1) * TimeLine.LINE_THICKNESS) > ctx.canvas.clientHeight) {\r\n    alert('Достигнуто максимальное количество линий времени')\r\n    return\r\n  } else {\r\n    aY = splitWorkspace(timeLines.length + 1)\r\n  }\r\n  let dt = TimeLine.getCurPeriod(PERIOD_TYPE)\r\n    let nColor = makeColor()\r\n  if (tl === null) {\r\n    tl = new TimeLine(ctx, dt, 0, 0, PERIOD_TYPE, name)\r\n  }\r\n  timeLines.push(tl)\r\n  for (let i = 0; i < timeLines.length; i++) {\r\n    timeLines[i].y = aY[i]\r\n    timeLines[i].color = nColor.next().value\r\n  }\r\n  drawAll()\r\n}\r\n\r\nfunction splitWorkspace (n) {\r\n  let rt = []\r\n  let m = (ctx.canvas.clientHeight - n * TimeLine.LINE_THICKNESS) / (n + 1) + 0.5\r\n  for (let i = 0, y = m; i < n; i++, y += (m + TimeLine.LINE_THICKNESS)) {\r\n    rt.push(y)\r\n  }\r\n  return rt\r\n}\r\n\r\nfunction getIndexLine (y) {\r\n  for (let i = 0; i < timeLines.length; i++) {\r\n    if (y >= timeLines[i].y && y < timeLines[i].y + TimeLine.LINE_THICKNESS) {\r\n      return i\r\n    }\r\n  }\r\n  return -1\r\n}\r\n\r\nfunction drawAll () {\r\n  ctx.clearRect(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight)\r\n  for (let i = 0; i < timeLines.length; i++) {\r\n    timeLines[i].Period = PERIOD_TYPE\r\n    timeLines[i].draw()\r\n  }\r\n}\r\n\r\nfunction getMousePos (canvas, evt) {\r\n  let rect = canvas.getBoundingClientRect()\r\n  return {\r\n    x: evt.clientX - rect.left,\r\n    y: evt.clientY - rect.top\r\n  }\r\n}\r\n\r\nfunction NewTmDialog () {\r\n  $('#tmName').val('')\r\n  $('#btnNewName').prop('disabled', true)\r\n  $('#tmNameModal').modal()\r\n}\r\n\r\nfunction SwitchPeriod (menuCtx, idPeriod) {\r\n  menuCtx.menu.find(el => el.id === 'period').sub.forEach((el, nd, arr) => {\r\n    if (el.id === idPeriod) {\r\n      el.icon = '<i class=\"fas fa-angle-down\"></i>'\r\n    } else {\r\n      el.icon = ''\r\n    }\r\n  })\r\n  PERIOD_TYPE = idPeriod\r\n  drawAll()\r\n  menuCtx.reload()\r\n}\r\n","export let saaGraph = (function () {\r\n  return {\r\n    roundedRect: function (ctx, x, y, width, height, radius) {\r\n      ctx.beginPath()\r\n      ctx.moveTo(x, y + radius)\r\n      ctx.lineTo(x, y + height)\r\n      ctx.lineTo(x + width, y + height)\r\n      ctx.lineTo(x + width, y + radius)\r\n      ctx.quadraticCurveTo(x + width, y, x + width - radius, y)\r\n      ctx.lineTo(x + radius, y)\r\n      ctx.quadraticCurveTo(x, y, x, y + radius)\r\n      ctx.fill()\r\n    }\r\n  }\r\n})()\r\n","export let stringUtils = (function () {\r\n  return {\r\n    pad: function (num, size) {\r\n      var s = num + ''\r\n      while (s.length < size) s = '0' + s\r\n      return s\r\n    },\r\n    isValidUserName: function (s) {\r\n      s = s.trim()\r\n      if (s === '') return false\r\n      let a = s.match(/\\w+/)\r\n      if (a[0] !== s) return false\r\n      return true\r\n    }\r\n  }\r\n})()\r\n","import { DateUtils } from './dateutils'\r\nimport { saaGraph } from './saagraph'\r\n\r\nexport class TimeLine {\r\n  public ctx: CanvasRenderingContext2D\r\n  public curPeriod: any\r\n  public x: number\r\n  public y: number\r\n  public color: any\r\n  public period: any\r\n  public name: string\r\n  public data: TimeLineData[]\r\n  public curdata: number\r\n  constructor (ctx, curPeriod = null, y = 0, color = null, period = null, name = 'нет имени', data = []) {\r\n    this.ctx = ctx\r\n    this.curPeriod = curPeriod\r\n    this.x = ctx.canvas.clientWidth - 1 + TimeLine.INTERVAL_WIDTH + 0.5\r\n    this.y = y\r\n    this.color = color\r\n    this.period = period\r\n    this.name = name\r\n    this.data = data\r\n  }\r\n\r\n  static get LINE_THICKNESS () { return 25 }\r\n  static get HALF_LINE_THICKNESS () { return TimeLine.LINE_THICKNESS / 2 }\r\n  static get INTERVAL_WIDTH (): number { return 100 }\r\n  static get HALF_INTERVAL_WIDTH () { return TimeLine.INTERVAL_WIDTH / 2 }\r\n  static get EnumPeriod () { return Object.freeze({ 'day': 1, 'month': 2, 'year': 3, 'decade': 4, 'century': 5 }) }\r\n\r\n  static load (ctx) {\r\n    let o = new TimeLine(ctx)\r\n    return o\r\n  }\r\n\r\n  save () {\r\n    alert(this.name)\r\n  }\r\n\r\n  set Period (period) {\r\n    this.x = this.ctx.canvas.clientWidth - 1 + TimeLine.INTERVAL_WIDTH + 0.5\r\n    this.curPeriod = TimeLine.getCurPeriod(period)\r\n    this.period = period\r\n  }\r\n\r\n  draw () {\r\n    this.data = []\r\n    this.curdata = -1\r\n    let x0: number = this.x\r\n    let dt = this.curPeriod\r\n    while (x0 >= 0) {\r\n      this.drawCell(x0, dt)\r\n      x0 -= TimeLine.INTERVAL_WIDTH\r\n      dt = this.getPeriodAgo(dt, -1)\r\n    }\r\n    x0 = this.x\r\n    dt = this.curPeriod\r\n    while (x0 <= this.ctx.canvas.clientWidth - 1 + TimeLine.INTERVAL_WIDTH) {\r\n      this.drawCell(x0, dt)\r\n      x0 += TimeLine.INTERVAL_WIDTH\r\n      dt = this.getPeriodAgo(dt, 1)\r\n    }\r\n    this.drawName()\r\n  }\r\n\r\n  drawName () {\r\n    const HBOOKMARK = 30\r\n    const INDENT = 10\r\n    const RADIUS = 10\r\n    this.ctx.save()\r\n    this.ctx.fillStyle = this.color\r\n    this.ctx.textBaseline = 'middle'\r\n    this.ctx.textAlign = 'center'\r\n    this.ctx.font = '16px serif'\r\n    let wBookmark = this.ctx.measureText(this.name).width + INDENT / 2\r\n    saaGraph.roundedRect(this.ctx, INDENT, this.y - HBOOKMARK, wBookmark, HBOOKMARK, RADIUS)\r\n    this.ctx.fillStyle = 'white'\r\n    this.ctx.fillText(this.name, INDENT + wBookmark / 2, this.y - HBOOKMARK / 2)\r\n    this.ctx.restore()\r\n  }\r\n\r\n  drawCell (x0, dt) {\r\n    let path = new Path2D()\r\n    path.rect(x0 - TimeLine.INTERVAL_WIDTH + 1, this.y, TimeLine.INTERVAL_WIDTH, TimeLine.LINE_THICKNESS)\r\n    this.ctx.fillStyle = this.color\r\n    this.ctx.strokeStyle = 'white'\r\n    this.ctx.fill(path)\r\n    this.ctx.stroke(path)\r\n\r\n    this.ctx.textBaseline = 'middle'\r\n    this.ctx.textAlign = 'center'\r\n    this.ctx.font = '14px serif'\r\n    this.ctx.fillStyle = 'white'\r\n    this.ctx.fillText(this.formatPeriod(dt), x0 - TimeLine.HALF_INTERVAL_WIDTH, this.y + TimeLine.HALF_LINE_THICKNESS)\r\n\r\n    this.data.push(new TimeLineData(dt, x0 - TimeLine.INTERVAL_WIDTH + 1, this.y, x0, this.y + TimeLine.LINE_THICKNESS - 1, path))\r\n  }\r\n\r\n  /**\r\n   * Получить значение периода для данной координаты курсора\r\n   *\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @returns number\r\n   * @memberof TimeLine\r\n   */\r\n  getCellValue (x, y) {\r\n    for (let i = 0; i < this.data.length; i++) {\r\n      if (x > this.data[i].x1 && x < this.data[i].x2 && y > this.data[i].y1 && y < this.data[i].y2) {\r\n        return i\r\n      }\r\n    }\r\n    return -1\r\n  }\r\n\r\n  onBox (_data) {\r\n    let data = this.data[_data]\r\n    this.ctx.strokeStyle = 'black'\r\n    this.ctx.stroke(data.path)\r\n  }\r\n\r\n  offBox () {\r\n    let data = this.data[this.curdata]\r\n    this.ctx.strokeStyle = 'white'\r\n    this.ctx.stroke(data.path)\r\n  }\r\n\r\n  shift (movementX) {\r\n    this.x += movementX\r\n  }\r\n\r\n  static getCurPeriod (periodType) {\r\n    let rt\r\n    switch (periodType) {\r\n      case TimeLine.EnumPeriod.month:\r\n        rt = DateUtils.getMonthFromDate(DateUtils.getCurDate())\r\n        break\r\n      case TimeLine.EnumPeriod.year:\r\n        rt = DateUtils.getYearFromDate(DateUtils.getCurDate())\r\n        break\r\n      case TimeLine.EnumPeriod.decade:\r\n        rt = DateUtils.getDecadeFromDate(DateUtils.getCurDate())\r\n        break\r\n      case TimeLine.EnumPeriod.century:\r\n        rt = DateUtils.getCenturyFromDate(DateUtils.getCurDate())\r\n        break\r\n      case TimeLine.EnumPeriod.day:\r\n      default:\r\n        rt = DateUtils.getCurDate()\r\n        break\r\n    }\r\n    return rt\r\n  }\r\n\r\n  formatPeriod (period) {\r\n    let rt\r\n    switch (this.period) {\r\n      case TimeLine.EnumPeriod.month:\r\n        rt = DateUtils.formatMonth(period)\r\n        break\r\n      case TimeLine.EnumPeriod.year:\r\n        rt = DateUtils.formatYear(period)\r\n        break\r\n      case TimeLine.EnumPeriod.decade:\r\n        rt = DateUtils.formatDecade(period)\r\n        break\r\n      case TimeLine.EnumPeriod.century:\r\n        rt = DateUtils.formatCentury(period)\r\n        break\r\n      case TimeLine.EnumPeriod.day:\r\n      default:\r\n        rt = DateUtils.formatDate(period)\r\n        break\r\n    }\r\n    return rt\r\n  }\r\n\r\n  getPeriodAgo (period, offset) {\r\n    let dt0\r\n    switch (this.period) {\r\n      case TimeLine.EnumPeriod.month:\r\n      case TimeLine.EnumPeriod.year:\r\n      case TimeLine.EnumPeriod.decade:\r\n        dt0 = period + offset\r\n        break\r\n      case TimeLine.EnumPeriod.century:\r\n        dt0 = period + offset\r\n        if (dt0 === 0) {\r\n          dt0 = dt0 + offset\r\n        }\r\n        break\r\n      case TimeLine.EnumPeriod.day:\r\n      default:\r\n        dt0 = DateUtils.getDateAgo(period, offset)\r\n        break\r\n    }\r\n    return dt0\r\n  }\r\n}\r\n\r\nclass TimeLineData {\r\n  public constructor (\r\n    public value: any,\r\n    public x1: number,\r\n    public y1: number,\r\n    public x2: number,\r\n    public y2: number,\r\n    public path: Path2D){}\r\n}\r\n"],"sourceRoot":""}