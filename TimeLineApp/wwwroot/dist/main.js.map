{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Globals.ts","webpack:///./src/LogonHandlers.ts","webpack:///./src/RegisterHandlers.ts","webpack:///./src/TLEvent.ts","webpack:///./src/colorutils.ts","webpack:///./src/contextmenu.ts","webpack:///./src/dateutils.ts","webpack:///./src/index.ts","webpack:///./src/saagraph.ts","webpack:///./src/stringutils.ts","webpack:///./src/timeline.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","export class Globals {\r\n  static IsAuthentificated: boolean = false\r\n\r\n  static getCookie(name) {\r\n    let c = document.cookie\r\n    var matches = document.cookie.match(new RegExp(\r\n      \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n    ))\r\n    return matches ? decodeURIComponent(matches[1]) : undefined\r\n  }\r\n}\r\n","import { Globals } from './Globals'\r\n\r\nexport class LogonHandlers {\r\n  // Открытие окна входа пользователя\r\n  static OpenLogonWindow(): boolean {\r\n    if (!Globals.IsAuthentificated) {\r\n      $('#logLogin').val(Globals.getCookie('timelineuser') || '')\r\n      $('#logPassword').val('')\r\n      $('#tmLoginModal').modal()\r\n      $('#log_server_error').css('display', 'none')\r\n    } else {\r\n      $.ajax('api/register/logout')\r\n        .done(data => {\r\n          if (data) {\r\n            Globals.IsAuthentificated = false\r\n            $('#btnLogin').text('Вход')\r\n            $('#lblUser').css('display', 'none')\r\n            $('#lblUser').text('')\r\n          }\r\n        })\r\n    }\r\n    return false\r\n  }\r\n\r\n  // Вход пользователя\r\n  static LoginLogout(): void {\r\n    if ((<HTMLInputElement>$('#logLogin')[0]).reportValidity()\r\n      && (<HTMLInputElement>$('#logPassword')[0]).reportValidity()) {\r\n      $.ajax('api/register/log', {\r\n        type: 'POST',\r\n        data: {\r\n          Login: $('#logLogin').val(),\r\n          Password: $('#logPassword').val()\r\n        }\r\n      })\r\n        .done(data => {\r\n          if (data === '') {\r\n            Globals.IsAuthentificated = true\r\n            $('#tmLoginModal').modal('hide')\r\n            $('#btnLogin').text('Выход')\r\n            $('#lblUser').css('display', 'unset')\r\n            $('#lblUser').text(<string>$('#logLogin').val())\r\n          } else {\r\n            $('#log_server_error').text(data)\r\n            $('#log_server_error').css('display', 'unset')\r\n          }\r\n        })\r\n    }\r\n  }\r\n}","export class RegisterHandlers {\r\n  static OpenRegisterWindow(): boolean {\r\n    $('#regLogin').val('')\r\n    $('#regEmail').val('')\r\n    $('#regPassword1').val('')\r\n    $('#regPassword2').val('')\r\n    $('#tmRegisterModal').modal()\r\n    $('#passw_not_matches').css('display', 'none')\r\n    $('#reg_server_error').css('display', 'none')\r\n    return false\r\n  }\r\n\r\n  static RegisterUser() {\r\n    if ((<HTMLInputElement>$('#regLogin')[0]).reportValidity()\r\n      && (<HTMLInputElement>$('#regEmail')[0]).reportValidity()\r\n      && (<HTMLInputElement>$('#regPassword1')[0]).reportValidity()\r\n      && (<HTMLInputElement>$('#regPassword2')[0]).reportValidity()) {\r\n      if ($('#regPassword1').val() === $('#regPassword2').val()) {\r\n        $.ajax('api/register/reg', {\r\n          type: 'POST',\r\n          data: {\r\n            Login: $('#regLogin').val(),\r\n            Email: $('#regEmail').val(),\r\n            Password1: $('#regPassword1').val(),\r\n            Password2: $('#regPassword2').val()\r\n          }\r\n        })\r\n          .done(data => {\r\n            if (data === '') {\r\n              $('#tmRegisterModal').modal('hide')\r\n            } else {\r\n              $('#reg_server_error').text(data)\r\n              $('#reg_server_error').css('display', 'unset')\r\n            }\r\n          })\r\n\r\n      } else {\r\n        $('#passw_not_matches').css('display', 'unset')\r\n      }\r\n    }\r\n  }\r\n}","import { DateUtils } from './dateutils'\r\n\r\nexport enum EnumPeriod {\r\n  day = 1, month = 2, year = 3, decade = 4, century = 5\r\n}\r\n\r\nclass TLDate {\r\n  Day: number\r\n  Month: number\r\n  Year: number\r\n  FromCrismas: number\r\n  constructor(year: number, month: number, day: number, fromCrismas?: number) {\r\n    if (fromCrismas === undefined) {\r\n      if (year == 0) throw new Error('Год равен 0')\r\n      if (month > 12 || month < 1) throw new Error('Неверный месяц месяца')\r\n      if (day < 1) throw new Error('День меньше 1')\r\n      if ([1, 3, 5, 7, 8, 10, 12].includes(month)) {\r\n        if (day > 31) throw new Error('Неверный день месяца')\r\n      } else if ([4, 6, 9, 11].includes(month)) {\r\n        if (day > 30) throw new Error('Неверный день месяца')\r\n      } else {\r\n        if (day > 29) throw new Error('Неверный день месяца')\r\n        if (year >= 1 && year <= 9999) {\r\n          var dt = new Date(year, month - 1, day);\r\n          if (DateUtils.leapYear(year)) {\r\n            if (day > 27) throw new Error('Неверный день месяца')\r\n          }\r\n          else {\r\n            if (day > 28) throw new Error('Неверный день месяца')\r\n          }\r\n        }\r\n      }\r\n      this.Day = day\r\n      this.Month = month\r\n      this.Year = year\r\n      this.FromCrismas = DateUtils.DaysFromAD(year, month, day)\r\n    } else {\r\n\r\n    }\r\n  }\r\n  \r\n  Greater(o: TLDate): boolean {\r\n    return this.FromCrismas > o.FromCrismas\r\n  }\r\n\r\n  GreaterOrEqual(o: TLDate): boolean {\r\n    return this.FromCrismas >= o.FromCrismas\r\n  }\r\n\r\n  Less(o: TLDate): boolean {\r\n    return this.FromCrismas < o.FromCrismas\r\n  }\r\n\r\n  LessOrEqual(o: TLDate): boolean {\r\n    return this.FromCrismas <= o.FromCrismas\r\n  }\r\n\r\n  Equal(o: TLDate): boolean {\r\n    return this.FromCrismas === o.FromCrismas\r\n  }\r\n}\r\n\r\nexport abstract class TLEvent {\r\n  Name: string\r\n  Day: TLDate\r\n  Month: number\r\n  Year: number\r\n  Decade: number\r\n  Century: number\r\n  Type: EnumPeriod\r\n  constructor(name: string) {\r\n    this.Name = name\r\n    this.Day = null\r\n    this.Month = null\r\n    this.Year = null\r\n    this.Decade = null\r\n    this.Century = null\r\n  }\r\n  protected DecadeFromYear(year: number): number {\r\n    return year / 10 + (year / Math.abs(year))\r\n  }\r\n  protected CenturyFromDecade(decade: number): number {\r\n    return decade / 10 + (decade / Math.abs(decade))\r\n  }\r\n  protected YearFromMonth(month: number): number {\r\n    return (month - 1) / 12 + (month / Math.abs(month))\r\n  }\r\n  static GetType(o: TLEvent): EnumPeriod {\r\n    if (o.Day !== null) return EnumPeriod.day\r\n    if (o.Month !== null) return EnumPeriod.month\r\n    if (o.Year !== null) return EnumPeriod.year\r\n    if (o.Decade !== null) return EnumPeriod.decade\r\n    if (o.Century !== null) return EnumPeriod.century\r\n  }\r\n  /**\r\n   * Попадает ли событие this в текущее значение ОВ\r\n   * @param period\r\n   * Текущая дробность отображения для ЛВ\r\n   * @param vl\r\n   * Текущее значение ОВ, которое в данный момент отрисовывается\r\n   */\r\n  static Equal(o1:TLEvent, o2: TLEvent): boolean {\r\n    let rt = false\r\n    if (o1.Century === o2.Century\r\n      && o1.Decade === o2.Decade\r\n      && o1.Year === o2.Year\r\n      && o1.Month === o2.Month\r\n      && o1.Day.Year === o2.Day.Year\r\n      && o1.Day.Month === o2.Day.Month\r\n      && o1.Day.Day === o2.Day.Day\r\n    ) rt = true\r\n    return rt\r\n  }\r\n}\r\n\r\nexport class TLEventDay extends TLEvent {\r\n  constructor(name: string, year: number, month: number, day: number) {\r\n    super(name);\r\n    this.Day = new TLDate(year, month, day)\r\n    this.Month = ((Math.abs(year) - 1) * 12 + month) * (year / Math.abs(year));\r\n    this.Year = year;\r\n    this.Decade = this.DecadeFromYear(year)\r\n    this.Century = this.CenturyFromDecade(this.Decade);\r\n    this.Type = EnumPeriod.day\r\n  }\r\n}\r\n\r\nexport class TLEventMonth extends TLEvent {\r\n  constructor(name: string, par1: number, par2?: number) {\r\n    super(name)\r\n    if (par2 !== undefined) {\r\n      let year = par1\r\n      let month = par2\r\n      this.Month = ((Math.abs(year) - 1) * 12 + month) * (year / Math.abs(year))\r\n      this.Year = year\r\n      this.Decade = this.DecadeFromYear(year)\r\n      this.Century = this.CenturyFromDecade(this.Decade)\r\n    } else {\r\n      let month = par1\r\n      this.Month = month\r\n      this.Year = this.YearFromMonth(month)\r\n      this.Decade = this.DecadeFromYear(this.Year)\r\n      this.Century = this.CenturyFromDecade(this.Decade);\r\n    }\r\n    this.Type = EnumPeriod.month\r\n  }\r\n}\r\n\r\nexport class TLEventYear extends TLEvent {\r\n  constructor(name: string, year: number) {\r\n    super(name)\r\n    this.Year = year\r\n    this.Decade = this.DecadeFromYear(year)\r\n    this.Century = this.CenturyFromDecade(this.Decade);\r\n    this.Type = EnumPeriod.year\r\n  }\r\n}\r\n\r\nexport class TLEventDecade extends TLEvent {\r\n  constructor(name: string, par1: number, par2?: number) {\r\n    super(name)\r\n    if (par2 !== undefined) {\r\n      let century = par1\r\n      let decade = par2\r\n      if(decade < 0 || decade > 9) throw Error('Неверный номер десятилетия')\r\n      this.Decade = ((Math.abs(century) - 1) * 10 + decade + 1) * (century / Math.abs(century))\r\n      this.Century = century;\r\n    } else {\r\n      let decade = par1\r\n      this.Decade = decade;\r\n      this.Century = this.CenturyFromDecade(decade)\r\n    }\r\n    this.Type = EnumPeriod.decade\r\n  }\r\n}\r\n\r\nexport class TLEventCentury extends TLEvent {\r\n  constructor(name: string, century: number) {\r\n    super(name)\r\n    this.Century = century\r\n    this.Type = EnumPeriod.century\r\n  }\r\n}\r\n\r\nexport class TLPeriod {\r\n  Name: string\r\n  Begin: TLEvent\r\n  End: TLEvent\r\n  constructor(o: TLPeriod) {\r\n    this.Name = o.Name;\r\n    let type: EnumPeriod\r\n    type = TLEvent.GetType(o.Begin)\r\n    if (type === EnumPeriod.day) {\r\n      this.Begin = new TLEventDay(o.Begin.Name, o.Begin.Day.Year, o.Begin.Day.Month, o.Begin.Day.Day)\r\n    } else if (type === EnumPeriod.month) {\r\n      this.Begin = new TLEventMonth(o.Begin.Name, o.Begin.Month)\r\n    } else if (type === EnumPeriod.year) {\r\n      this.Begin = new TLEventYear(o.Begin.Name, o.Begin.Year)\r\n    } else if (type === EnumPeriod.decade) {\r\n      this.Begin = new TLEventDecade(o.Begin.Name, o.Begin.Decade)\r\n    } else if (type === EnumPeriod.century) {\r\n      this.Begin = new TLEventCentury(o.Begin.Name, o.Begin.Century)\r\n    }\r\n    type = TLEvent.GetType(o.End)\r\n    if (type === EnumPeriod.day) {\r\n      this.End = new TLEventDay(o.End.Name, o.End.Day.Year, o.End.Day.Month, o.End.Day.Day)\r\n    } else if (type === EnumPeriod.month) {\r\n      this.End = new TLEventMonth(o.End.Name, o.End.Month)\r\n    } else if (type === EnumPeriod.year) {\r\n      this.End = new TLEventYear(o.End.Name, o.End.Year)\r\n    } else if (type === EnumPeriod.decade) {\r\n      this.End = new TLEventDecade(o.End.Name, o.End.Decade)\r\n    } else if (type === EnumPeriod.century) {\r\n      this.End = new TLEventCentury(o.End.Name, o.End.Century)\r\n    }\r\n  }\r\n  /**\r\n   * Попадает текущее значение ОВ в период this\r\n   * @param period\r\n   * Текущая дробность отображения для ЛВ\r\n   * @param vl\r\n   * Текущее значение ОВ, которое в данный момент отрисовывается\r\n   */\r\n  Contains(period: EnumPeriod, vl: number | Date): boolean {\r\n    let rt = false\r\n    switch (period) {\r\n      case EnumPeriod.day:\r\n        let dt = <Date>vl\r\n        rt = this.ContainsDay(new TLDate(dt.getFullYear(), dt.getMonth() + 1, dt.getDate()))\r\n        break\r\n      case EnumPeriod.month:\r\n        //rt = (vl === this.Month)\r\n        break\r\n      case EnumPeriod.year:\r\n        //rt = (vl === this.Year)\r\n        break\r\n      case EnumPeriod.decade:\r\n        //rt = (vl === this.Decade)\r\n        break\r\n      case EnumPeriod.century:\r\n        //rt = (vl === this.Century)\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    return rt\r\n  }\r\n  /**\r\n   * \r\n   * @param dt отображаемый ОВ\r\n   * @param o объект насчет которого принимается решение включать или нет\r\n   */\r\n  private ContainsDay(dt: TLDate): boolean {\r\n    let dt1: TLDate, dt2: TLDate\r\n    switch (this.Begin.Type) {\r\n      case EnumPeriod.day:\r\n        dt1 = this.Begin.Day\r\n        break\r\n      case EnumPeriod.month:\r\n        dt1 = new TLDate(this.Begin.Day.Year, this.Begin.Day.Month, 1)\r\n        break\r\n      case EnumPeriod.year:\r\n        dt1 = new TLDate(this.Begin.Day.Year, 1, 1)\r\n        break\r\n      case EnumPeriod.decade:\r\n        dt1 = new TLDate(Math.floor(this.Begin.Year / 10) + 1, 1, 1)\r\n        break\r\n      case EnumPeriod.century:\r\n        dt1 = new TLDate(Math.floor(this.Begin.Year / 100) + 1, 1, 1)\r\n        break\r\n    }\r\n    switch (this.End.Type) {\r\n      case EnumPeriod.day:\r\n        dt2 = this.End.Day\r\n        break\r\n      case EnumPeriod.month:\r\n        dt2 = new TLDate(this.Begin.Day.Year, this.Begin.Day.Month, 1)\r\n        break\r\n      case EnumPeriod.year:\r\n        dt2 = new TLDate(this.Begin.Day.Year, 1, 1)\r\n        break\r\n      case EnumPeriod.decade:\r\n        dt2 = new TLDate(Math.floor(this.Begin.Year / 10) + 1, 1, 1)\r\n        break\r\n      case EnumPeriod.century:\r\n        dt2 = new TLDate(Math.floor(this.Begin.Year / 100) + 1, 1, 1)\r\n        break\r\n    }\r\n    return dt.GreaterOrEqual(dt1) && dt.LessOrEqual(dt2)\r\n  }\r\n}\r\n\r\nexport class TimeLineData {\r\n  /** Здесь только события с конкретными датами */\r\n  //Events: TLEvent[] = []\r\n  /** Здесь периоды, события у которых нет конкретной даты тоже относятся к периодам */\r\n  Periods: TLPeriod[] = []\r\n  Name: string\r\n  constructor(o: TimeLineData) {\r\n    this.Name = o.Name\r\n    o.Periods.forEach(data => {\r\n      if (TLEvent.Equal(data.Begin, data.End))\r\n        this.Periods.push(new TLPeriodEvent(data))\r\n      else\r\n        this.Periods.push(new TLPeriod(data))\r\n    })\r\n  }\r\n}\r\n\r\nexport class TLPeriodEvent extends TLPeriod {\r\n  constructor(o: TLPeriod) {\r\n    super(o)\r\n  }\r\n}\r\n","export let makeColor = function * () {\r\n  var index = 0\r\n  let colors = ['magenta', 'green', 'rgba(255, 0, 0, 1.0)', 'blue', 'magenta', 'orange']\r\n  while (true) {\r\n    yield colors[index]\r\n    if (index < 4) {\r\n      index++\r\n    } else {\r\n      index = 0\r\n    }\r\n  }\r\n}\r\n","export class ContextMenu {\r\n  private static count: number = 0\r\n  private options: object\r\n  private menu: object[]\r\n  private contextTarget: EventTarget = null\r\n  static readonly DIVIDER: string = 'cm_divider'\r\n\r\n  constructor(menu: object[], options?: object) {\r\n    let num = ContextMenu.count++\r\n    this.menu = menu\r\n    if (options == undefined) this.options = {}\r\n    else this.options = options\r\n    window.addEventListener('resize', () => this.onresize())\r\n    this.reload()\r\n  }\r\n\r\n  private onresize() {\r\n    if (ContextUtil.getProperty(this.options, 'close_on_resize', true)) {\r\n      this.hide()\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    document.getElementById('cm_' + ContextMenu.count).classList.remove('display')\r\n    window.removeEventListener('click', () => this.documentClick())\r\n  }\r\n\r\n  setOptions(_options: object) {\r\n      this.options = _options\r\n  }\r\n\r\n  changeOption(option: string, value: any) {\r\n      this.options[option] = value\r\n  }\r\n\r\n  getOptions() {\r\n    return this.options\r\n  }\r\n\r\n  reload() {\r\n    if (document.getElementById('cm_' + ContextMenu.count) == null) {\r\n      var cnt = document.createElement('div')\r\n      cnt.className = 'cm_container'\r\n      cnt.id = 'cm_' + ContextMenu.count\r\n\r\n      document.body.appendChild(cnt)\r\n    }\r\n\r\n    var container = document.getElementById('cm_' + ContextMenu.count)\r\n    container.innerHTML = ''\r\n\r\n    container.appendChild(this.renderLevel(this.menu))\r\n  }\r\n\r\n  private renderLevel(level) {\r\n    var ulOuter = document.createElement('ul')\r\n    level.forEach((item) => {\r\n      let li = <MyHTMLLIElement>document.createElement('li')\r\n      li.menu = this\r\n\r\n      if (typeof item.type === 'undefined') {\r\n        var iconSpan = document.createElement('span')\r\n        iconSpan.className = 'cm_icon_span'\r\n\r\n        if (ContextUtil.getProperty(item, 'icon', '') != '') {\r\n          iconSpan.innerHTML = ContextUtil.getProperty(item, 'icon', '')\r\n        } else {\r\n          iconSpan.innerHTML = ContextUtil.getProperty(this.options, 'default_icon', '')\r\n        }\r\n\r\n        var textSpan = document.createElement('span')\r\n        textSpan.className = 'cm_text'\r\n\r\n        if (ContextUtil.getProperty(item, 'text', '') != '') {\r\n          textSpan.innerHTML = ContextUtil.getProperty(item, 'text', '')\r\n        } else {\r\n          textSpan.innerHTML = ContextUtil.getProperty(this.options, 'default_text', 'item')\r\n        }\r\n\r\n        var subSpan = document.createElement('span')\r\n        subSpan.className = 'cm_sub_span'\r\n\r\n        if (typeof item.sub !== 'undefined') {\r\n          if (ContextUtil.getProperty(this.options, 'sub_icon', '') != '') {\r\n            subSpan.innerHTML = ContextUtil.getProperty(this.options, 'sub_icon', '')\r\n          } else {\r\n            subSpan.innerHTML = '&#155;'\r\n          }\r\n        }\r\n\r\n        li.appendChild(iconSpan)\r\n        li.appendChild(textSpan)\r\n        li.appendChild(subSpan)\r\n\r\n        if (!ContextUtil.getProperty(item, 'enabled', true)) {\r\n          li.setAttribute('disabled', '')\r\n        } else {\r\n          if (typeof item.events === 'object') {\r\n            var keys = Object.keys(item.events)\r\n\r\n            for (var i = 0; i < keys.length; i++) {\r\n              li.addEventListener(keys[i], item.events[keys[i]])\r\n            }\r\n          }\r\n\r\n          if (typeof item.sub !== 'undefined') {\r\n            li.appendChild(this.renderLevel(item.sub))\r\n          }\r\n        }\r\n      } else {\r\n        if (item.type == ContextMenu.DIVIDER) {\r\n          li.className = 'cm_divider'\r\n        }\r\n      }\r\n\r\n      ulOuter.appendChild(li)\r\n    })\r\n\r\n    return ulOuter\r\n  }\r\n\r\n  display(e: MouseEvent, target?: EventTarget) {\r\n    if (typeof target !== 'undefined') {\r\n      this.contextTarget = target\r\n    } else {\r\n      this.contextTarget = e.target\r\n    }\r\n\r\n    var menu = document.getElementById('cm_' + ContextMenu.count)\r\n\r\n    var clickCoords = { x: e.clientX, y: e.clientY }\r\n    var clickCoordsX = clickCoords.x\r\n    var clickCoordsY = clickCoords.y\r\n\r\n    var menuWidth = menu.offsetWidth + 4\r\n    var menuHeight = menu.offsetHeight + 4\r\n\r\n    var windowWidth = window.innerWidth\r\n    var windowHeight = window.innerHeight\r\n\r\n    var mouseOffset = parseInt(ContextUtil.getProperty(this.options, 'mouse_offset', 2))\r\n\r\n    if ((windowWidth - clickCoordsX) < menuWidth) {\r\n      menu.style.left = windowWidth - menuWidth + 'px'\r\n    } else {\r\n      menu.style.left = (clickCoordsX + mouseOffset) + 'px'\r\n    }\r\n\r\n    if ((windowHeight - clickCoordsY) < menuHeight) {\r\n      menu.style.top = windowHeight - menuHeight + 'px'\r\n    } else {\r\n      menu.style.top = (clickCoordsY + mouseOffset) + 'px'\r\n    }\r\n\r\n    var sizes = ContextUtil.getSizes(menu)\r\n\r\n    if ((windowWidth - clickCoordsX) < sizes.width) {\r\n      menu.classList.add('cm_border_right')\r\n    } else {\r\n      menu.classList.remove('cm_border_right')\r\n    }\r\n\r\n    if ((windowHeight - clickCoordsY) < sizes.height) {\r\n      menu.classList.add('cm_border_bottom')\r\n    } else {\r\n      menu.classList.remove('cm_border_bottom')\r\n    }\r\n\r\n    menu.classList.add('display')\r\n\r\n    if (ContextUtil.getProperty(this.options, 'close_on_click', true)) {\r\n      window.addEventListener('click', () => { this.documentClick() })\r\n    }\r\n\r\n    e.preventDefault()\r\n  }\r\n\r\n  private documentClick() {\r\n    this.hide()\r\n  }\r\n}\r\n\r\nexport class ContextUtil {\r\n  static getProperty(options: object, opt: string, def: any) {\r\n    if (typeof options[opt] !== 'undefined') {\r\n      return options[opt]\r\n    } else {\r\n      return def\r\n    }\r\n  }\r\n\r\n  static getSizes(obj) {\r\n    var lis = obj.getElementsByTagName('li')\r\n\r\n    var widthDef = 0\r\n    var heightDef = 0\r\n\r\n    for (var i = 0; i < lis.length; i++) {\r\n      var li = lis[i]\r\n\r\n      if (li.offsetWidth > widthDef) {\r\n        widthDef = li.offsetWidth\r\n      }\r\n\r\n      if (li.offsetHeight > heightDef) {\r\n        heightDef = li.offsetHeight\r\n      }\r\n    }\r\n\r\n    var width = widthDef\r\n    var height = heightDef\r\n\r\n    for (let i = 0; i < lis.length; i++) {\r\n      let li = lis[i]\r\n\r\n      var ul = li.getElementsByTagName('ul')\r\n      if (typeof ul[0] !== 'undefined') {\r\n        var ulSize = ContextUtil.getSizes(ul[0])\r\n\r\n        if (widthDef + ulSize.width > width) {\r\n          width = widthDef + ulSize.width\r\n        }\r\n\r\n        if (heightDef + ulSize.height > height) {\r\n          height = heightDef + ulSize.height\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      'width': width,\r\n      'height': height\r\n    }\r\n  }\r\n}\r\n\r\nclass MyHTMLLIElement extends HTMLLIElement {\r\n  menu: ContextMenu\r\n}","import { stringUtils } from './stringutils'\r\n\r\nexport class DateUtils {\r\n  private static mth: string[] = ['ЯНВ', 'ФЕВ', 'МАР', 'АПР', 'МАЙ', 'ИЮН', 'ИЮЛ', 'АВГ', 'СЕН', 'ОКТ', 'НОЯ', 'ДЕК']\r\n  private static dth: number[] =      [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\r\n  private static dth_leap: number[] = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\r\n  /**\r\n   * Дни от РХ в год, месяц, день\r\n   * @param days день от РХ\r\n   */\r\n  static YMDFromAD(days: number): { year: number, month: number, day: number } {\r\n    let d: number = 0\r\n    let yr: number, delta: number\r\n    if (days > 0) {\r\n      delta = yr = 1\r\n    } else if (days < 0) {\r\n      delta = yr = -1\r\n    } else {\r\n      return null\r\n    }\r\n    while (d < days) {\r\n      if (DateUtils.leapYear(yr)) {\r\n        d += (366 * delta)\r\n      } else {\r\n        d += (365 * delta)\r\n      }\r\n      yr += delta\r\n    }\r\n\r\n    // отматываем год назад\r\n    if (DateUtils.leapYear(yr)) {\r\n      d -= (366 * delta)\r\n    } else {\r\n      d -= (365 * delta)\r\n    }\r\n    yr -= delta\r\n\r\n    let dth0: number[]\r\n    if (DateUtils.leapYear(yr)) {\r\n      dth0 = this.dth_leap\r\n    } else {\r\n      dth0 = this.dth\r\n    }\r\n    let mth = 0\r\n    while (d < days) {\r\n      d += (dth0[mth] * delta)\r\n      mth++\r\n    }\r\n    mth--\r\n    d -= (dth0[mth] * delta)\r\n\r\n    let ds =  Math.abs(days) - Math.abs(d)\r\n\r\n    return {year:yr, month:mth + 1, day:ds}\r\n  }\r\n  /**\r\n   * День от Рождества Христова + -\r\n   * @param year может быть с минусом\r\n   * @param month 1-12\r\n   * @param day\r\n   */\r\n  static DaysFromAD(_year: number, month: number, day: number): number {\r\n    let year = Math.abs(_year)\r\n    let days_from_Crismas: number = 0\r\n    for (let i = 1; i < year; i++) {\r\n      if (DateUtils.leapYear(i)) {\r\n        days_from_Crismas += 366\r\n      } else {\r\n        days_from_Crismas += 365\r\n      }\r\n    }\r\n    if (DateUtils.leapYear(year)) {\r\n      this.dth_leap.slice(0, month - 1).forEach(s => {\r\n        days_from_Crismas += s\r\n      })\r\n    } else {\r\n      this.dth.slice(0, month - 1).forEach(s => {\r\n        days_from_Crismas += s\r\n      })\r\n    }\r\n    return (days_from_Crismas + day) * (year / _year)\r\n  }\r\n  static getCurDate(): Date {\r\n    let dt = new Date()\r\n    return new Date(dt.getFullYear(), dt.getMonth(), dt.getDate())\r\n  }\r\n  static getDateAgo(date: Date, days: number): Date {\r\n    var dateCopy = new Date(date)\r\n    dateCopy.setDate(dateCopy.getDate() + days)\r\n    return dateCopy\r\n  }\r\n  static formatDate(dt: Date): string {\r\n    return stringUtils.pad(dt.getDate(), 2) + '.' + stringUtils.pad(dt.getMonth() + 1, 2) + '.' + (dt.getFullYear() + '').substring(2)\r\n  }\r\n  static getMonthFromDate(dt: Date): number {\r\n    return (dt.getFullYear() - 1) * 12 + dt.getMonth() + 1\r\n  }\r\n  static getYearFromDate(dt: Date): number {\r\n    return dt.getFullYear()\r\n  }\r\n  static getDecadeFromDate(dt: Date): number {\r\n    return Math.floor(dt.getFullYear() / 10) + 1\r\n  }\r\n  static getCenturyFromDate(dt: Date): number {\r\n    return Math.floor(dt.getFullYear() / 100) + 1\r\n  }\r\n  static getDecade(century: number, decade: number): number {\r\n    return (century - 1) * 10 + decade + 1\r\n  }\r\n  static formatMonth(period: number): string {\r\n    let year = Math.floor((period - 1) / 12) + 1\r\n    let month = period - (year - 1) * 12\r\n    return this.mth[month - 1] + ' ' + stringUtils.pad(year, 4)\r\n  }\r\n  static formatYear(period: number): string {\r\n    return period.toString()\r\n  }\r\n  static formatDecade(period: number): string {\r\n    let century = Math.floor((period - 1) / 10) + 1\r\n    let decade = period - (century - 1) * 10\r\n    return romanize(century) + ' ' + (decade - 1) * 10 + 'е'\r\n  }\r\n  static formatCentury(num: number): string {\r\n    return romanize(num)\r\n  }\r\n  static getDecadeComponent(decade: number): number {\r\n    let century = Math.floor((decade - 1) / 10) + 1\r\n    return decade - (century - 1) * 10\r\n  }\r\n\r\n  static leapYear(year) {\r\n    return ((year % 4 == 0) && (year % 100 != 0)) || (year % 400 == 0);\r\n  }\r\n}\r\n\r\nfunction romanize (num: number): string {\r\n  if (!+num) { return null }\r\n  var digits = String(+num).split('')\r\n\r\n  var key = ['', 'C', 'CC', 'CCC', 'CD', 'D', 'DC', 'DCC', 'DCCC', 'CM',\r\n    '', 'X', 'XX', 'XXX', 'XL', 'L', 'LX', 'LXX', 'LXXX', 'XC',\r\n    '', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX']\r\n\r\n  var roman = ''\r\n\r\n  var i = 3\r\n  while (i--) { roman = (key[+digits.pop() + (i * 10)] || '') + roman }\r\n  return Array(+digits.join('') + 1).join('M') + roman\r\n}\r\n","import { TimeLine } from './timeline'\r\nimport { makeColor } from './colorutils'\r\nimport { ContextMenu } from './contextmenu'\r\nimport { LogonHandlers } from './LogonHandlers';\r\nimport { RegisterHandlers } from './RegisterHandlers'\r\nimport { TimeLineData, EnumPeriod } from './TLEvent'\r\nimport { DateUtils } from './dateutils';\r\n\r\nconst MIN_GAP = 100\r\nlet PERIOD_TYPE = EnumPeriod.day\r\nconst HTOP = 56\r\n\r\nlet timeLines: TimeLine[] = []\r\nlet ctx: CanvasRenderingContext2D\r\n\r\n(function main () {\r\n  let isDragDrop = false\r\n  let indLine: number\r\n\r\n  let menuitems = [\r\n    {id: 'new', text: 'Новая', icon: '<i class=\"far fa-file\"></i>',\r\n      events: {click: OpenNewTLDialog}},\r\n    {id: 'load', text: 'Загрузить', icon: '<i class=\"far fa-folder-open\"></i>',\r\n      events: { click: OpenLoadTLDialog }},\r\n    {id: 'save', text: 'Сохранить', icon: '<i class=\"far fa-save\"></i>',\r\n      enabled: false,\r\n      events: {click: () => timeLines[indLine].save()}},\r\n    {id: 'line',type: ContextMenu.DIVIDER},\r\n    {id: 'period', text: 'Периодичность',\r\n      sub: [\r\n        {id: EnumPeriod.day, text: 'День', icon: '<i class=\"fas fa-angle-down\"></i>',\r\n          events: {click: () => SwitchPeriod(menuCtx, EnumPeriod.day)}},\r\n        {id: EnumPeriod.month, text: 'Месяц',\r\n          events: {click: () => SwitchPeriod(menuCtx, EnumPeriod.month)}},\r\n        {id: EnumPeriod.year, text: 'Год',\r\n          events: {click: () => SwitchPeriod(menuCtx, EnumPeriod.year)}},\r\n        {id: EnumPeriod.decade, text: 'Десятилетие',\r\n          events: {click: () => SwitchPeriod(menuCtx, EnumPeriod.decade)}},\r\n        {id: EnumPeriod.century, text: 'Век',\r\n          events: {click: () => SwitchPeriod(menuCtx, EnumPeriod.century)}}\r\n      ]\r\n    }\r\n  ]\r\n  let menuCtx = new ContextMenu(menuitems)\r\n  //document.getElementById('cm_' + num)\r\n\r\n  let canvas: HTMLCanvasElement = document.getElementById('canvas') as HTMLCanvasElement\r\n  ctx = canvas.getContext('2d')\r\n\r\n  canvas.onmousedown = (ev) => {\r\n    if (ev.button === 0) {\r\n      let pos = getMousePos(canvas, ev)\r\n      indLine = getIndexLine(pos.y)\r\n      if (indLine !== -1) {\r\n        isDragDrop = true\r\n        canvas.style.cursor = 'Pointer'\r\n      }\r\n    }\r\n  }\r\n  canvas.onmouseup = (ev) => {\r\n    isDragDrop = false\r\n    canvas.style.cursor = 'Default'\r\n  }\r\n  canvas.onmousemove = (ev) => {\r\n    let data\r\n    if (!isDragDrop) {\r\n      for (let i = 0; i < timeLines.length; i++) {\r\n        let pos = getMousePos(canvas, ev)\r\n        data = timeLines[i].getCellValue(pos.x, pos.y)\r\n        if (data !== timeLines[i].curdata) {\r\n          if (timeLines[i].curdata !== -1) {\r\n            timeLines[i].offBox()\r\n          }\r\n          if (data !== -1) {\r\n            timeLines[i].onBox(data)\r\n          }\r\n          timeLines[i].curdata = data\r\n        }\r\n      }\r\n    } else {\r\n      timeLines[indLine].shift(ev.movementX)\r\n      timeLines[indLine].draw()\r\n    }\r\n  }\r\n\r\n  (window.onresize = () => {\r\n    canvas.style.top = HTOP + 'px'\r\n    canvas.width = window.innerWidth\r\n    canvas.height = window.innerHeight - HTOP\r\n    drawAll()\r\n  })()\r\n\r\n  $('#canvas').on('contextmenu', (e) => {\r\n    let pos = getMousePos(canvas, e)\r\n    indLine = getIndexLine(pos.y)\r\n    let pMenu = menuCtx.menu.find(el => el.id === 'save')\r\n    if (indLine === -1) {\r\n      pMenu.enabled = false\r\n    } else {\r\n      pMenu.enabled = true\r\n      pMenu.events = {\r\n        'click': (e) => {\r\n          timeLines[indLine].save()\r\n        }\r\n      }\r\n    }\r\n    menuCtx.reload()\r\n    menuCtx.display(e)\r\n    e.preventDefault()\r\n  })\r\n\r\n  $('#newTimeline').click((ev) => {\r\n    OpenNewTLDialog()\r\n  })\r\n  $('#load').click((ev) => {\r\n    LoadTimeLine()\r\n  })\r\n  $('#save').click((ev) => {\r\n    alert('save')\r\n  })\r\n  $('#options').click((ev) => {\r\n    $('#typePeriod').val(EnumPeriod.year)\r\n    $('#tmOptionsModal').modal()\r\n  })\r\n  $('#btnNewName').click((ev) => {\r\n    $('#tmNameModal').modal('hide')\r\n    NewTimeLine(<string>$('#tmName').val())\r\n  })\r\n  $('.closenamemodal').click((ev) => {\r\n    $('#tmNameModal').modal('hide')\r\n  })\r\n  $('.closeoptionmodal').click((ev) => {\r\n    $('#tmOptionsModal').modal('hide')\r\n  })\r\n  $('.closeregistermodal').click((ev) => {\r\n    $('#tmRegisterModal').modal('hide')\r\n  })\r\n  $('.closeloginmodal').click((ev) => {\r\n    $('#tmLoginModal').modal('hide')\r\n  })\r\n  $('.closeloadmodal').click((ev) => {\r\n    $('#tmLoadModal').modal('hide')\r\n  })\r\n  $('#tmName').keyup((ev) => {\r\n    if ((<string>$('#tmName').val()).trim() !== '') {\r\n      $('#btnNewName').prop('disabled', false)\r\n      if (ev.keyCode === 13) {\r\n        $('#tmNameModal').modal('hide')\r\n        NewTimeLine(<string>$('#tmName').val())\r\n      }\r\n    } else {\r\n      $('#btnNewName').prop('disabled', true)\r\n    }\r\n  })\r\n  $('#tmNameModal').on('shown.bs.modal', function () {\r\n    $('#tmName').trigger('focus')\r\n  })\r\n  $('#action01').click((ev) => {\r\n    alert('action01')\r\n  })\r\n  $('#regPassword1').focus(ev => {\r\n    $('#passw_not_matches').css('display', 'none')\r\n  })\r\n  $('#regPassword2').focus(ev => {\r\n    $('#passw_not_matches').css('display', 'none')\r\n  })\r\n  $('#logPassword').focus(ev => {\r\n    $('#log_server_error').css('display', 'none')\r\n  })\r\n  // Открытие окна регистрации пользователя btnReg\r\n  $('#btnReg').click(RegisterHandlers.OpenRegisterWindow)\r\n  // Регистрация пользователя btnRegisterUser\r\n  $('#btnRegisterUser').click(RegisterHandlers.RegisterUser)\r\n  // Открытие окна входа пользователя btnLogin\r\n  $('#btnLogin').click(LogonHandlers.OpenLogonWindow)\r\n  // Вход пользователя btnLoginUser\r\n  $('#btnLoginUser').click(LogonHandlers.LoginLogout)\r\n  // Загрузка TL btnLoadTL\r\n  $('#btnLoadTL').click(LoadTimeLine)\r\n  let daysFromAD = DateUtils.DaysFromAD(1980, 1, 1)\r\n  console.log('daysFromAD ' + daysFromAD)\r\n  let qq = DateUtils.YMDFromAD(daysFromAD)\r\n  console.log(qq)\r\n})()\r\n\r\nfunction LoadTimeLine() {\r\n  $.ajax('api/storage/load',\r\n    {data: {\r\n      fname: $('#files_list').val()\r\n    }\r\n    })\r\n    .done(data => {\r\n      let tldata = new TimeLineData(JSON.parse(data))\r\n      let tl = new TimeLine(ctx)\r\n      tl.name = tldata.Name\r\n      tl.tldata = tldata\r\n      NewTimeLine(tldata.Name, tl)\r\n      $('#tmLoadModal').modal('hide')\r\n    })\r\n    .fail(data => {\r\n      alert('Ошибка загрузки\\n'\r\n        + data.status.toString() + ' '\r\n        + data.statusText + '\\n'\r\n        + data.responseText)\r\n    }\r\n  )\r\n}\r\n\r\nfunction OpenLoadTLDialog() {\r\n  TimeLine.getList()\r\n    .then(value => {\r\n      let files_list = $('#files_list')\r\n      files_list.find('option').remove()\r\n      for (let i = 0; i < value.length; i++) {\r\n        files_list.append($('<option></option>', { value: value[i], text: value[i] }))\r\n      }\r\n      $('#tmLoadModal').modal()\r\n    })\r\n    .catch(responseText => {\r\n      alert('Ошибка сервера.\\n' + responseText)\r\n    })\r\n  \r\n  //let tl = TimeLine.load(ctx)\r\n  //NewTimeLine(tl.name, tl)\r\n}\r\n\r\nfunction NewTimeLine (name: string, tl: TimeLine = null) {\r\n  let aY\r\n  if ((((timeLines.length + 2) * MIN_GAP) + (timeLines.length + 1) * TimeLine.LINE_THICKNESS) > ctx.canvas.clientHeight) {\r\n    alert('Достигнуто максимальное количество линий времени')\r\n    return\r\n  } else {\r\n    aY = splitWorkspace(timeLines.length + 1)\r\n  }\r\n  let dt = TimeLine.getCurPeriod(PERIOD_TYPE)\r\n  let nColor = makeColor()\r\n  if (tl === null) {\r\n    tl = new TimeLine(ctx, dt, 0, 0, PERIOD_TYPE, name)\r\n  }\r\n  timeLines.push(tl)\r\n  for (let i = 0; i < timeLines.length; i++) {\r\n    timeLines[i].y = aY[i]\r\n    timeLines[i].color = nColor.next().value\r\n  }\r\n  drawAll()\r\n}\r\n\r\nfunction splitWorkspace (n) {\r\n  let rt = []\r\n  let m = (ctx.canvas.clientHeight - n * TimeLine.LINE_THICKNESS) / (n + 1) + 0.5\r\n  for (let i = 0, y = m; i < n; i++, y += (m + TimeLine.LINE_THICKNESS)) {\r\n    rt.push(y)\r\n  }\r\n  return rt\r\n}\r\n\r\nfunction getIndexLine (y) {\r\n  for (let i = 0; i < timeLines.length; i++) {\r\n    if (y >= timeLines[i].y && y < timeLines[i].y + TimeLine.LINE_THICKNESS) {\r\n      return i\r\n    }\r\n  }\r\n  return -1\r\n}\r\n\r\nfunction drawAll () {\r\n  ctx.clearRect(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight)\r\n  for (let i = 0; i < timeLines.length; i++) {\r\n    timeLines[i].Period = PERIOD_TYPE\r\n    timeLines[i].draw()\r\n  }\r\n}\r\n\r\nfunction getMousePos (canvas, evt) {\r\n  let rect = canvas.getBoundingClientRect()\r\n  return {\r\n    x: evt.clientX - rect.left,\r\n    y: evt.clientY - rect.top\r\n  }\r\n}\r\n\r\nfunction OpenNewTLDialog () {\r\n  $('#tmName').val('')\r\n  $('#btnNewName').prop('disabled', true)\r\n  $('#tmNameModal').modal()\r\n}\r\n\r\nfunction SwitchPeriod (menuCtx, idPeriod) {\r\n  menuCtx.menu.find(el => el.id === 'period').sub.forEach((el, nd, arr) => {\r\n    if (el.id === idPeriod) {\r\n      el.icon = '<i class=\"fas fa-angle-down\"></i>'\r\n    } else {\r\n      el.icon = ''\r\n    }\r\n  })\r\n  PERIOD_TYPE = idPeriod\r\n  drawAll()\r\n  menuCtx.reload()\r\n}\r\n","export let saaGraph = (function () {\r\n  return {\r\n    roundedRect: function (ctx, x, y, width, height, radius) {\r\n      ctx.beginPath()\r\n      ctx.moveTo(x, y + radius)\r\n      ctx.lineTo(x, y + height)\r\n      ctx.lineTo(x + width, y + height)\r\n      ctx.lineTo(x + width, y + radius)\r\n      ctx.quadraticCurveTo(x + width, y, x + width - radius, y)\r\n      ctx.lineTo(x + radius, y)\r\n      ctx.quadraticCurveTo(x, y, x, y + radius)\r\n      ctx.fill()\r\n    }\r\n  }\r\n})()\r\n","export let stringUtils = (function () {\r\n  return {\r\n    pad: function (num, size) {\r\n      var s = num + ''\r\n      while (s.length < size) s = '0' + s\r\n      return s\r\n    }\r\n  }\r\n})()\r\n","import { DateUtils } from './dateutils'\r\nimport { saaGraph } from './saagraph'\r\nimport { TimeLineData, TLEvent, EnumPeriod, TLPeriod } from './TLEvent'\r\n\r\n\r\nexport class TimeLine {\r\n  ctx: CanvasRenderingContext2D\r\n  /** Значение ОВ с которого начинается отрисовка справа налево */\r\n  curPeriod: number | Date\r\n  /** координата x с которой отрисовывается ЛВ, сначала справа налево, потом слева направо */\r\n  x: number\r\n  y: number\r\n  color: string | CanvasGradient | CanvasPattern\r\n  /** Текущий вид ОВ */\r\n  period: EnumPeriod\r\n  name: string\r\n  /** Массив данных для отображаемых ОВ */\r\n  data: CellData[]\r\n  /** Текущий индекс в массиве this.data  */ \r\n  curdata: number\r\n  /** Массив событий и периодов для всей ЛВ */\r\n  tldata: TimeLineData\r\n\r\n  static readonly LINE_THICKNESS: number = 25\r\n  private static readonly HALF_LINE_THICKNESS: number = TimeLine.LINE_THICKNESS / 2\r\n  private static readonly INTERVAL_WIDTH: number = 100\r\n  private static readonly HALF_INTERVAL_WIDTH: number = TimeLine.INTERVAL_WIDTH / 2\r\n\r\n  constructor (ctx, curPeriod = null, y = 0, color = null, period = null, name = 'нет имени', data = []) {\r\n    this.ctx = ctx\r\n    this.curPeriod = curPeriod\r\n    this.x = ctx.canvas.clientWidth - 1 + TimeLine.INTERVAL_WIDTH + 0.5\r\n    this.y = y\r\n    this.color = color\r\n    this.period = period\r\n    this.name = name\r\n    this.data = data\r\n  }\r\n\r\n  static getList(): Promise<string[]> {\r\n    return new Promise<string[]>(\r\n      function (resolve, reject) {\r\n        $.ajax('api/storage/list')\r\n          .done(data => {\r\n            resolve(data)\r\n          })\r\n          .fail((data) => {\r\n            reject(data.responseText)\r\n          })\r\n      }\r\n    )\r\n  }\r\n\r\n  save () {\r\n    $.ajax('api/storage/save', {\r\n      method: 'POST',\r\n      data: {\r\n        s1: this.name,\r\n        s2: JSON.stringify(this.tldata)\r\n      }\r\n    })\r\n      .done((_) => {\r\n        alert('Сохранение прошло успешно.')\r\n      })\r\n      .fail((jqXHR) => {\r\n        alert('Ошибка при сохранении.\\n' + jqXHR.responseText)\r\n      })\r\n  }\r\n\r\n  set Period (period) {\r\n    this.x = this.ctx.canvas.clientWidth - 1 + TimeLine.INTERVAL_WIDTH + 0.5\r\n    this.curPeriod = TimeLine.getCurPeriod(period)\r\n    this.period = period\r\n  }\r\n\r\n  draw () {\r\n    this.data = []\r\n    this.curdata = -1\r\n    let x0: number = this.x\r\n    let dt = this.curPeriod\r\n    while (x0 >= 0) {\r\n      this.drawCell(x0, dt)\r\n      x0 -= TimeLine.INTERVAL_WIDTH\r\n      dt = this.getPeriodAgo(dt, -1)\r\n    }\r\n    x0 = this.x\r\n    dt = this.curPeriod\r\n    while (x0 <= this.ctx.canvas.clientWidth - 1 + TimeLine.INTERVAL_WIDTH) {\r\n      this.drawCell(x0, dt)\r\n      x0 += TimeLine.INTERVAL_WIDTH\r\n      dt = this.getPeriodAgo(dt, 1)\r\n    }\r\n    this.drawName()\r\n  }\r\n\r\n  /**\r\n   * Формирует массив событий для текущего ОВ\r\n   * @param dt \r\n   * Текущее значение ОВ, которое в данный момент отрисовывается\r\n   */\r\n  //findevents(dt: number | Date): TLEvent[] {\r\n  //  let rt: TLEvent[] = []\r\n  //  this.tldata.Events.forEach(v => {\r\n  //    if (v.Equal(this.period, dt)) {\r\n  //      rt.push(v)\r\n  //    }\r\n  //  })\r\n  //  return rt\r\n  //}\r\n  /**\r\n   * Формирует массив периодов для текущего ОВ\r\n   * @param dt \r\n   * Текущее значение ОВ, которое в данный момент отрисовывается\r\n   */\r\n  findperiods(dt: number | Date): TLPeriod[] {\r\n    let rt: TLPeriod[] = []\r\n    this.tldata.Periods.forEach(v => {\r\n      if (v.Contains(this.period, dt)) {\r\n        rt.push(v)\r\n      }\r\n    })\r\n    return rt\r\n  }\r\n\r\n  drawName () {\r\n    const HBOOKMARK = 30\r\n    const INDENT = 10\r\n    const RADIUS = 10\r\n    this.ctx.save()\r\n    this.ctx.fillStyle = this.color\r\n    this.ctx.textBaseline = 'middle'\r\n    this.ctx.textAlign = 'center'\r\n    this.ctx.font = '16px serif'\r\n    let wBookmark = this.ctx.measureText(this.name).width + INDENT / 2\r\n    saaGraph.roundedRect(this.ctx, INDENT, this.y - HBOOKMARK, wBookmark, HBOOKMARK, RADIUS)\r\n    this.ctx.fillStyle = 'white'\r\n    this.ctx.fillText(this.name, INDENT + wBookmark / 2, this.y - HBOOKMARK / 2)\r\n    this.ctx.restore()\r\n  }\r\n\r\n  drawCell (x0, dt) {\r\n    let path = new Path2D()\r\n    path.rect(x0 - TimeLine.INTERVAL_WIDTH + 1, this.y, TimeLine.INTERVAL_WIDTH, TimeLine.LINE_THICKNESS)\r\n    this.ctx.fillStyle = this.color\r\n    this.ctx.strokeStyle = 'white'\r\n    this.ctx.fill(path)\r\n    this.ctx.stroke(path)\r\n\r\n    this.ctx.textBaseline = 'middle'\r\n    this.ctx.textAlign = 'center'\r\n    this.ctx.font = '14px serif'\r\n    this.ctx.fillStyle = 'white'\r\n    this.ctx.fillText(this.formatPeriod(dt), x0 - TimeLine.HALF_INTERVAL_WIDTH, this.y + TimeLine.HALF_LINE_THICKNESS)\r\n\r\n    let cellData = new CellData(dt, x0 - TimeLine.INTERVAL_WIDTH + 1, this.y, x0, this.y + TimeLine.LINE_THICKNESS - 1, path)\r\n    //cellData.events = this.findevents(dt)\r\n    cellData.periods = this.findperiods(dt)\r\n    this.data.push(cellData)\r\n\r\n  }\r\n\r\n  /**\r\n   * Получить индекс в массиве this.data для данной координаты курсора\r\n   *\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @returns number\r\n   * @memberof TimeLine\r\n   */\r\n  getCellValue (x: number, y: number): number {\r\n    for (let i = 0; i < this.data.length; i++) {\r\n      if (x > this.data[i].x1 && x < this.data[i].x2 && y > this.data[i].y1 && y < this.data[i].y2) {\r\n        return i\r\n      }\r\n    }\r\n    return -1\r\n  }\r\n\r\n  onBox (_data) {\r\n    let data = this.data[_data]\r\n    this.ctx.strokeStyle = 'black'\r\n    this.ctx.stroke(data.path)\r\n  }\r\n\r\n  offBox () {\r\n    let data = this.data[this.curdata]\r\n    this.ctx.strokeStyle = 'white'\r\n    this.ctx.stroke(data.path)\r\n  }\r\n\r\n  shift (movementX) {\r\n    this.x += movementX\r\n  }\r\n\r\n  static getCurPeriod (periodType: EnumPeriod): number | Date {\r\n    let rt\r\n    switch (periodType) {\r\n      case EnumPeriod.month:\r\n        rt = DateUtils.getMonthFromDate(DateUtils.getCurDate())\r\n        break\r\n      case EnumPeriod.year:\r\n        rt = DateUtils.getYearFromDate(DateUtils.getCurDate())\r\n        break\r\n      case EnumPeriod.decade:\r\n        rt = DateUtils.getDecadeFromDate(DateUtils.getCurDate())\r\n        break\r\n      case EnumPeriod.century:\r\n        rt = DateUtils.getCenturyFromDate(DateUtils.getCurDate())\r\n        break\r\n      case EnumPeriod.day:\r\n      default:\r\n        rt = DateUtils.getCurDate()\r\n        break\r\n    }\r\n    return rt\r\n  }\r\n\r\n  formatPeriod (period) {\r\n    let rt\r\n    switch (this.period) {\r\n      case EnumPeriod.month:\r\n        rt = DateUtils.formatMonth(period)\r\n        break\r\n      case EnumPeriod.year:\r\n        rt = DateUtils.formatYear(period)\r\n        break\r\n      case EnumPeriod.decade:\r\n        rt = DateUtils.formatDecade(period)\r\n        break\r\n      case EnumPeriod.century:\r\n        rt = DateUtils.formatCentury(period)\r\n        break\r\n      case EnumPeriod.day:\r\n      default:\r\n        rt = DateUtils.formatDate(period)\r\n        break\r\n    }\r\n    return rt\r\n  }\r\n\r\n  getPeriodAgo (period: number | Date, offset: number): Date {\r\n    let dt0\r\n    switch (this.period) {\r\n      case EnumPeriod.month:\r\n      case EnumPeriod.year:\r\n      case EnumPeriod.decade:\r\n        dt0 = <number>period + offset\r\n        break\r\n      case EnumPeriod.century:\r\n        dt0 = <number>period + offset\r\n        if (dt0 === 0) {\r\n          dt0 = dt0 + offset\r\n        }\r\n        break\r\n      case EnumPeriod.day:\r\n      default:\r\n        dt0 = DateUtils.getDateAgo(<Date>period, offset)\r\n        break\r\n    }\r\n    return dt0\r\n  }\r\n}\r\n\r\nclass CellData {\r\n  //events: TLEvent[]\r\n  periods: TLPeriod[]\r\n  constructor (\r\n    public value: any,\r\n    public x1: number,\r\n    public y1: number,\r\n    public x2: number,\r\n    public y2: number,\r\n    public path: Path2D){}\r\n}\r\n"],"sourceRoot":""}